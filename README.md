<img src="docs/Galvanalyser-logo-sm.png" width="500" />

[![Unit Tests (Docker)](https://github.com/Battery-Intelligence-Lab/galvanalyser/actions/workflows/unit-test.yml/badge.svg)](https://github.com/Battery-Intelligence-Lab/galvanalyser/actions/workflows/unit-test.yml)

Galvanalyser is a system for automatically storing data generated by battery cycling 
machines in a database in a standard format.
The project contains several distinct components:

- A REST API 
  - A Python client for the REST API
  - A web frontend for the REST API
- [Harvesters](docs/UserGuide.md#harvesters) that monitor and process experimental data

A laboratory running a [Galvanalyser server](docs/UserGuide.md#galvanalyser-server) instance and a battery 
cycling machines can use Galvanalyser to make it easy to access, analyse, and 
share their experimental data. 
To do this, they:
1. Set the cycling machines up to output their raw test result files to a shared drive. 
2. Set up a [harvester](docs/UserGuide.md#harvesters) on a computer with access to that shared drive.
    - (This only needs to be done once)
3. Log into their lab [Web frontend](docs/UserGuide.md#web-frontend) and configure the
    [harvester](docs/UserGuide.md#harvesters) to crawl the appropriate directories on the shared drive.
4. Log into the [Web frontend](docs/UserGuide.md#web-frontend) to edit metadata and view data,
    or use the [Python client](docs/UserGuide.md#python-client) to download formatted data for analysis.

The harvesters are able to parse the following file types:

- MACCOR files in .txt, .xsl/.xslx, or raw format
- Ivium files in .idf format
- Biologic files in .mpr format

The server database is a relational database that stores each dataset along with information 
about column types, units, and other relevant metadata (e.g. cell information, owner, purpose 
of the experiment).
The [REST API](docs/UserGuide.md#rest-api) provides its own definition via a downloadable OpenAPI schema file 
(`schema/`), and provides interactive documentation via SwaggerUI (`schema/swagger-ui/`) and
Redoc (`schema/redoc/`).

A diagram of the logical structure of the system is shown below. The arrows indicate the 
direction of data flow.

<img src="docs/GalvanalyserStructure.PNG" alt="Data flows from battery cycling machines to Galvanalyser Harvesters, then to the Galvanalyser server and REST API. Metadata can be updated and data read using the web client, and data can be downloaded by the Python client." width="600" />


## Project documentation

The `docs` directory contains more detailed documentation on a number of topics. 
It contains the following items:
- [FirstTimeQuickSetup.md](docs/FirstTimeQuickSetup.md) - A quick start guide to 
  setting up your first complete Galvanalyser system
  - Installing Galvanalyser server
  - Setting up a Harvester
  - Checking your setup
- [UserGuide.md](docs/UserGuide.md) - A detailed guide for Galvanalyser users
  - [Galvanalyser server](docs/UserGuide.md#galvanalyser-server)
  - [REST API](docs/UserGuide.md#rest-api)
  - [User accounts](docs/UserGuide.md#user-accounts)
  - [Web interface](docs/UserGuide.md#web-interface)
  - [Python client](docs/UserGuide.md#python client)
  - [Harvesters](docs/UserGuide.md#harvesters)
- [DevelopmentGuide.md](docs/DevelopmentGuide.md) - A guide for developers on 
  Galvanalyser
  - [Creating a testing instance](docs/DevelopmentGuide.md#running)
  - [Running tests](docs/DevelopmentGuide.md#testing)
  - [Technology used](docs/DevelopmentGuide.md#technology-used)
  - [Contributor guide](docs/DevelopmentGuide.md#contributor-guide)

### Generate OpenAPI schema

The OpenAPI schema is generated by `drf_spectacular` and available from the `/schema/` endpoint. 
For json format, use `/schema/?format=json`.
