<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Galvalanyser User Guide &#8212; Galv 2.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=51b770b3"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Gavanalyser Development Guide" href="DevelopmentGuide.html" />
    <link rel="prev" title="First Time Quick Setup" href="FirstTimeQuickSetup.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="galvalanyser-user-guide">
<h1>Galvalanyser User Guide<a class="headerlink" href="#galvalanyser-user-guide" title="Link to this heading">¶</a></h1>
<p>For help on setting up the Galv server and Harvesters, see the
<a class="reference internal" href="FirstTimeQuickSetup.html"><span class="doc">First Time Quick Setup</span></a> guide.</p>
<section id="galv-server">
<h2>Galv server<a class="headerlink" href="#galv-server" title="Link to this heading">¶</a></h2>
<p>Once set up, the Galv server instance should not need attending to.
To set it up, all you need to do is change the .env file’s VIRTUAL_HOST_ROOT
and LETSENCRYPT_EMAIL variables to your domain name and email.
When you’ve verified that it works, you can also set LETSENCRYPT_TEST to false
to generate real SSL certificates that you do not need to manually accept.
It exposes two webservers: the frontend on the main domain and the backend on its
<code class="docutils literal notranslate"><span class="pre">api</span></code> subdomain.</p>
<section id="user-accounts">
<span id="id1"></span><h3>User accounts<a class="headerlink" href="#user-accounts" title="Link to this heading">¶</a></h3>
<p>User accounts are created via the <a class="reference internal" href="#web-frontend"><span class="std std-ref">Web frontend</span></a>.
Each user account must be approved by an existing user before it can log on
to the system.
Once user accounts are created and approved, they can be assigned roles
on Harvesters and Paths.</p>
<section id="user-roles">
<h4>User roles<a class="headerlink" href="#user-roles" title="Link to this heading">¶</a></h4>
<p>Each <a class="reference internal" href="#harvesters"><span class="std std-ref">Harvester</span></a> requires at least one administrator, and may
have as many additional administrators as required.
Each Harvester administrator has the following rights:</p>
<ul class="simple">
<li><p>Edit Harvester details (name, sleep time)</p></li>
<li><p>Appoint other users to administrator role</p></li>
<li><p>Remove administrators (except the last administrator)</p></li>
<li><p>Create new <a class="reference internal" href="#monitored-paths"><span class="std std-ref">Monitored paths</span></a></p></li>
<li><p>Perform any of the administrator actions for any of the Harvester’s Paths</p></li>
</ul>
<p>Harvesters have <a class="reference internal" href="#monitored-paths"><span class="std std-ref">Monitored paths</span></a> - directories which are monitored for data files.
Each Path may have any number of administrators and users.
The Path’s Harvester administrators have the same rights as the Path’s administrators.
Path administrators may:</p>
<ul class="simple">
<li><p>Edit Path details (path, stable time)</p></li>
<li><p>Appoint other users to administrator and user roles</p></li>
<li><p>Remove users from administrator and user roles</p></li>
<li><p>Perform any of the Path user actions</p></li>
</ul>
<p>Path users may:</p>
<ul class="simple">
<li><p>View and edit details of datafiles found in the Path directory</p></li>
<li><p>View and edit datasets produced when those datafiles are imported</p></li>
</ul>
<p>Additionally, any registered user may create, and view Cell and Equipment details.
They may also edit and delete those Cell and Equipment instances provided that no
datasets are using them.</p>
</section>
</section>
<section id="rest-api">
<h3>REST API<a class="headerlink" href="#rest-api" title="Link to this heading">¶</a></h3>
<p>Endpoints are written as absolute paths starting from the Galv server
address, so to reach the <code class="docutils literal notranslate"><span class="pre">/harvesters/</span></code> endpoint for a Galv server
located at <code class="docutils literal notranslate"><span class="pre">http://api.localhost</span></code>, you would go to <code class="docutils literal notranslate"><span class="pre">http://api.localhost/harvesters/</span></code>.</p>
<section id="api-spec">
<h4>API Spec<a class="headerlink" href="#api-spec" title="Link to this heading">¶</a></h4>
<p>The REST API provides a browsable interface at <code class="docutils literal notranslate"><span class="pre">/spec/swagger-ui/</span></code>.
Its OpenAPI spec can be downloaded from <code class="docutils literal notranslate"><span class="pre">/spec/</span></code>.
Spec download defaults to <code class="docutils literal notranslate"><span class="pre">.yml</span></code> format, but <code class="docutils literal notranslate"><span class="pre">.json</span></code> is available from <code class="docutils literal notranslate"><span class="pre">/spec/?format=json</span></code>.</p>
<p>Static versions of this spec can be downloaded directly from this website:</p>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="_downloads/573e84bea8c08fe4d380fa125759ca5c/schema.yml"><code class="xref download docutils literal notranslate"><span class="pre">.yml</span> <span class="pre">format</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="_downloads/29ca588982da1e8d8324a8f6cf78ce34/schema.json"><code class="xref download docutils literal notranslate"><span class="pre">.json</span> <span class="pre">format</span></code></a></p></li>
</ul>
</section>
<section id="browsable-api">
<h4>Browsable API<a class="headerlink" href="#browsable-api" title="Link to this heading">¶</a></h4>
<p>The browsable API provided by Django REST Framework is not fully functional,
but does provide a relatively useful way to browse the raw data on the REST API.
It is provided at the base address (endpoint <code class="docutils literal notranslate"><span class="pre">/</span></code>), and provides its own list of
available endpoints.</p>
</section>
</section>
</section>
<section id="web-frontend">
<span id="id2"></span><h2>Web frontend<a class="headerlink" href="#web-frontend" title="Link to this heading">¶</a></h2>
<p>The primary tool for interacting with the REST API is the web frontend.
This is designed to provide a user-friendly way to view and edit <a class="reference internal" href="#harvesters"><span class="std std-ref">Harvesters</span></a>,
<a class="reference internal" href="#monitored-paths"><span class="std std-ref">Monitored paths</span></a>, <a class="reference internal" href="#datasets"><span class="std std-ref">Datasets</span></a> and their metadata.</p>
<p>The web frontend is accessed via a <a class="reference internal" href="#user-accounts"><span class="std std-ref">User account</span></a>,
and allows new user accounts to be created and approved by existing users.
Each user’s view of the web frontend is customised to only include information
relevant to them.</p>
<section id="datasets-page">
<span id="id3"></span><h3>Datasets page<a class="headerlink" href="#datasets-page" title="Link to this heading">¶</a></h3>
<p>When first successfully logging in with an (approved) account, the user will land
on the Datasets page.
This page lists information about any <a class="reference internal" href="#datasets"><span class="std std-ref">Datasets</span></a> that have been
imported from files in a <a class="reference internal" href="#monitored-paths"><span class="std std-ref">Monitored path</span></a> that the user
has access to.</p>
<p>The first time you log in, this is likely to be blank.
Once some datasets have been imported, you will see them listed here and
you will be able to edit their metadata.</p>
<p>Each dataset can be described in terms of its name and type,
a purpose selected from a pre-populated list, and may be associated with
the particular <a class="reference internal" href="#cell-page"><span class="std std-ref">Cell</span></a> that generated it, as well as any
<a class="reference internal" href="#equipment-page"><span class="std std-ref">Equipment</span></a> that was used.</p>
</section>
<section id="data-view">
<h3>Data view<a class="headerlink" href="#data-view" title="Link to this heading">¶</a></h3>
<p>Clicking the magnifying glass icon for a dataset allows you to inspect the data.
This will bring up two buttons which provide boilerplate code for accessing the
data using the <a class="reference internal" href="#python-client"><span class="std std-ref">Python client</span></a> or MATLAB, as well as a plot of
the voltage and ampage of the cell over the duration of the test.</p>
<p>Additional columns in the data can be added to the preview graph by clicking on their
names.</p>
</section>
<section id="harvesters-page">
<h3>Harvesters page<a class="headerlink" href="#harvesters-page" title="Link to this heading">¶</a></h3>
<p>The Harvesters page lists <a class="reference internal" href="#harvesters"><span class="std std-ref">Harvesters</span></a> that you have access to,
either because you are an administrator of that Harvester, or because you are
a user or administrator on one or more of the Harvester’s <a class="reference internal" href="#monitored-paths"><span class="std std-ref">Monitored paths</span></a>.</p>
<p>If you are an administrator on the Harvester, you will be able to modify the
Harvester properties, changing the Harvester name or the sleep time.
Sleep time governs how long the Harvester spends idle between harvest cycles.</p>
<p>There will be an additional section below the monitored paths section that
allows you to view or edit the harvester program’s environment variables
according to your permissions.</p>
</section>
<section id="monitored-paths-view">
<h3>Monitored paths view<a class="headerlink" href="#monitored-paths-view" title="Link to this heading">¶</a></h3>
<p>Click on the magnifying glass icon to view the selected Harvester’s Paths.
The Path view shows the <a class="reference internal" href="#monitored-paths"><span class="std std-ref">Monitored paths</span></a> on the Harvester
that you can access.
If you have sufficient permissions, you will be able to alter Path details,
including the directory path, the length of time files must be stable before
attempting import, and user permissions.</p>
</section>
<section id="file-view">
<h3>File view<a class="headerlink" href="#file-view" title="Link to this heading">¶</a></h3>
<p>Click on the magnifying glass icon to view the Files found in the Monitored path.
These are read-only because their properties are directly dependent on the actual
files in the monitored directory.
If any file has failed to import, the last error associated with that import will
appear when you mouse-over the IMPORT FAILED state.</p>
<p>If for any reason you want to force the harvester to attempt to import a file
that has failed to import correctly, you can do so by clicking the refresh button
in the ‘Force Re-import’ column.</p>
<p>Files that have been successfully imported will show at least one linked <a class="reference internal" href="#datasets"><span class="std std-ref">Datasets</span></a>.
Once you have some, your initial <a class="reference internal" href="#datasets-page"><span class="std std-ref">Dataset view</span></a> will be populated
and you can add metadata to your dataset.</p>
</section>
<section id="cell-page">
<span id="id4"></span><h3>Cell page<a class="headerlink" href="#cell-page" title="Link to this heading">¶</a></h3>
<p>Each dataset will be generated by a specific cell.
The Cell page is where you can provide information about cells, which you can
then link to their datasets in the <a class="reference internal" href="#datasets-page"><span class="std std-ref">Datasets page</span></a>.</p>
<p>The majority of cell properties are grouped together in a Cell family.
The family contains generic information about name, manufacturer, form factor,
chemistry, and capacity and weight statistics.
For any cell family that is not currently in use, you can edit its properties.
You can also create new cell families.</p>
<p>Once you have a cell family that you would like to create a cell for, click on
the magnifying glass icon to view its cells.
A cell should have a unique identifier which should be a globally unique value
that specifically identifies that cell.
A good choice is to use the serial number of the physical cell you are describing.
Cells may also have display names so that they are easier to identify when adding
metadata to datasets.
Where cells are not in use by a dataset,
you can edit their unique identifiers and display names.</p>
</section>
<section id="equipment-page">
<span id="id5"></span><h3>Equipment page<a class="headerlink" href="#equipment-page" title="Link to this heading">¶</a></h3>
<p>Equipment can be defined on the equipment page.
Equipment has a name and a type, and these can be edited for any equipment
that is not in use by a dataset.</p>
</section>
<section id="python-client">
<span id="id6"></span><h3>Python client<a class="headerlink" href="#python-client" title="Link to this heading">¶</a></h3>
<p>The best way to access the data is via the Python API client.
This provides read-only access to datasets and their metadata,
and allows you to write reproducible analysis scripts that do not require local
storage to run their analyses.</p>
<p>You can download the latest Python API client <code class="xref download docutils literal notranslate"><span class="pre">here</span></code>.</p>
</section>
</section>
<section id="harvesters">
<span id="id7"></span><h2>Harvesters<a class="headerlink" href="#harvesters" title="Link to this heading">¶</a></h2>
<p>Harvesters are standalone programs that run continually in Docker containers.
Each Harvester has a set of directories called <a class="reference internal" href="#monitored-paths"><span class="std std-ref">Monitored paths</span></a>
that it watches for changes.
When files appear in those paths, the Harvester reports the size to the
Galv server.
If the file size has been stable for long enough, the Harvester will attempt
to import the dataset, sending its metadata and parsed data to the Galv server.</p>
<p>At the beginning of each cycle, the Harvester checks in with the Galv
server and updates its configuration if it has been changed.</p>
</section>
<section id="monitored-paths">
<span id="id8"></span><h2>Monitored paths<a class="headerlink" href="#monitored-paths" title="Link to this heading">¶</a></h2>
<p>Monitored paths are directory paths relative to the Harvester container.
It is a good idea to use <a class="reference external" href="https://docs.docker.com/storage/">Docker’s volume mounting</a>
to provide easily reachable paths to the Harvester which can then be
registered as Monitored paths.</p>
<p>Monitored paths have a <a class="reference external" href="https://docs.python.org/3/library/re.html">Python Regular Expression</a>
that is used to match files in the directory (the default is <code class="docutils literal notranslate"><span class="pre">.*</span></code>).
The expression is applied to the filename after the Monitored path itself.
If your Monitored path is <code class="docutils literal notranslate"><span class="pre">/data</span></code> and your regular expression is <code class="docutils literal notranslate"><span class="pre">^[a-z]+\.csv$</span></code>,
then the Harvester will match files like <code class="docutils literal notranslate"><span class="pre">/data/abc.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">/data/def.csv</span></code>.
The Monitored path regex can be used to group files with particular extensions,
with a particular format to their names, or to identify subdirectories
(although the subdirectories could be added as separate Monitored paths).</p>
</section>
<section id="datasets">
<span id="id9"></span><h2>Datasets<a class="headerlink" href="#datasets" title="Link to this heading">¶</a></h2>
<p>Files that are stable for long enough are parsed by the Harvester.
If the file is suitable for parsing, its metadata will be sent to the
Galv server and a Dataset will be constructed to house the data.</p>
<p>The file’s data will then be extracted into Galv’s column-value format
and sent to the server.
The column-value format means that column metadata is abstracted away,
allowing every column to be stored as a series of numbers.
Columns that contain strings generate an encoding map that is used to
restore the values on demand.
This method of storing data means that large quantities of data can be
stored in the database relatively rapidly.</p>
<p>Datasets’ metadata can be edited in the web frontend’s <a class="reference internal" href="#datasets-page"><span class="std std-ref">Datasets page</span></a>,
and the data downloaded directly using the <a class="reference internal" href="#python-client"><span class="std std-ref">Python client</span></a>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Galv</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="FirstTimeQuickSetup.html">First Time Quick Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Galvalanyser User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#galv-server">Galv server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#web-frontend">Web frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#harvesters">Harvesters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#monitored-paths">Monitored paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datasets">Datasets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DevelopmentGuide.html">Gavanalyser Development Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="FirstTimeQuickSetup.html" title="previous chapter">First Time Quick Setup</a></li>
      <li>Next: <a href="DevelopmentGuide.html" title="next chapter">Gavanalyser Development Guide</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, Oxford RSE.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/UserGuide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>